define("ndi/key-manager/0.1.0/key-manager",["ndi/event-listener/0.1.0/event-listener","ndi/events/0.1.0/events"],function(a,b,c){function d(a,b,c,d){this.status=a,this.keyCode=b,this.keyName=c,this.prevent=d||!1}function e(a){this._keyStatus=0,this.__keyNum=0,this.__keys={};var b=this.domEvents=f(a),c=this;b.on(f.MOUSE_DOWN,function(a){var a=a.elementEvent,b=c.__keys[a.button];b&&b.prevent&&a.preventDefault(),c.down(a.button)}),b.on(f.MOUSE_UP,function(a){var a=a.elementEvent,b=c.__keys[a.button];b&&b.prevent&&a.preventDefault(),c.up(a.button)}),b.on(f.KEY_DOWN,function(a){var a=a.elementEvent,b=c.__keys[a.keyCode];b&&b.prevent&&a.preventDefault(),c.down(a.keyCode)}),b.on(f.KEY_UP,function(a){var a=a.elementEvent,b=c.__keys[a.keyCode];b&&b.prevent&&a.preventDefault(),c.up(a.keyCode)}),b.on(f.MOUSE_OUT,function(a){for(var a=a.elementEvent,b=0;3>b;b++){var d=c.__keys[b];d&&(c._keyStatus=d.lift(this._keyStatus))}})}var f=a("ndi/event-listener/0.1.0/event-listener"),g=a("ndi/events/0.1.0/events");d.prototype.isPressed=function(a){return(a&this.status)===this.status},d.prototype.press=function(a){return a|=this.status},d.prototype.lift=function(a){return a&=~this.status},g.mixTo(e),e.prototype.KEY_DOWN="keyDown",e.prototype.KEY_UP="keyUp",e.prototype.LEFT="mouseLeft",e.prototype.MIDDLE="mouseMiddle",e.prototype.RIGHT="mouseRight",e.prototype.bindKey=function(a,b,c){var e=this.__keyNum;return"number"!=typeof a?(console.error("KeyManager.bindKey( "+e+", "+a+", "+(b?b:"")+" ) failed: the type of the first variable must be SFInt32"),this):(this[a]&&console.warn("KeyManager.bindKey("+e+", "+a+", "+(b?b:"")+' ): the KeyCode "'+KeyCode+'" has been used!'),this.__keys[b]=this.__keys[a]=new d(1<<e,a,b?b:"",c),this.__keyNum++,a)},e.prototype.unbindKey=function(){},e.prototype.down=function(a){var b=this.__keys[a];b&&(this._keyStatus=b.press(this._keyStatus),this.trigger(this.KEY_DOWN,b.keyName,this.domEvents.getEvent()))},e.prototype.up=function(a){var b=this.__keys[a];b&&(this._keyStatus=b.lift(this._keyStatus),this.trigger(this.KEY_UP,b.keyName,this.domEvents.getEvent()))},e.prototype.getStatus=function(){return this._keyStatus},e.prototype.isContainedOne=function(){for(var a=0;a<arguments.length;a++){var b=this.__keys[arguments[a]];if(b&&b.isPressed(this._keyStatus))return!0}return!1},e.prototype.isContainedAll=function(){for(var a=0;a<arguments.length;a++){var b=this._keys[arguments[a]];if(!b||!b.isPressed(this._keyStatus))return!1}return!0},e.prototype.isContainedWith=function(){for(var a=0,b=0;b<arguments.length;b++)a|=this._keys[arguments[b]].status;return this.isContainedAll.apply(this,arguments)&&a===this.getStatus()?!0:!1},c.exports=e});
