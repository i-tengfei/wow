define("ndi/model/0.1.0/model",["ndi/render/0.58.0/render"],function(a,b,c){function d(a,b){var c=g[a];return-1===c.indexOf(b)&&(console.warn("类型错误，必须为",c,"之一！"),b=c[0]),b}function e(a){return"object"!=typeof this||this instanceof e?(this.__render__={},this.attributes={},this.val(a),this.__init__(),void 0):new e(a)}var f=a("ndi/render/0.58.0/render"),g={type:["own","load","yun"],geo:["cube"]};e.prototype.__init__=function(){var a,b,c,d=this.attributes,e=this.__render__,g=d.mat;"own"===d.type&&"cube"===d.geometryType&&(b=e.geometry=new f.CubeGeometry(5,5,5));var h="MeshBasicMaterial";(void 0!==g.ambient||void 0!==g.emissive||void 0!==g.wrapAround||void 0!==g.wrapRGB||void 0!==g.morphNormals)&&(h="MeshLambertMaterial"),(void 0!==g.specular||void 0!==g.shininess||void 0!==g.metal||void 0!==g.perPixel||void 0!==g.bumpMap||void 0!==g.skinning||void 0!==g.normalMap||void 0!==g.normalScale)&&(h="MeshPhongMaterial"),"own"===d.type&&(c=new f[h](g)),"mesh"===d.renderType&&(a=new f.Mesh(b,c)),a.position=d.position,a.rotation=d.rotation,e.model=a},e.prototype.val=function(a){var b=this.attributes;if(void 0===a){var c=b.mat,e={type:b.type,renderType:b.renderType,position:this.__render__.model.position.val(),rotation:this.__render__.model.rotation.val(),side:c.side,opacity:c.opacity,transparent:c.transparent,blending:c.blending,blendSrc:c.blendSrc,blendEquation:c.blendEquation,depthTest:c.depthTest,depthWrite:c.depthWrite,polygonOffset:c.polygonOffset,polygonOffsetFactor:c.polygonOffsetFactor,polygonOffsetUnits:c.polygonOffsetUnits,alphaTest:c.alphaTest,overdraw:c.overdraw,visible:c.visible,needsUpdate:c.needsUpdate,color:c.color,map:c.map,lightMap:c.lightMap,specularMap:c.specularMap,envMap:c.envMap,combine:c.combine,reflectivity:c.reflectivity,refractionRatio:c.refractionRatio,fog:c.fog,shading:c.shading,wireframe:c.wireframe,wireframeLinewidth:c.wireframeLinewidth,wireframeLinecap:c.wireframeLinecap,wireframeLinejoin:c.wireframeLinejoin,vertexColors:c.vertexColors,skinning:c.skinning,morphTargets:c.morphTargets,ambient:c.ambient,emissive:c.emissive,wrapAround:c.wrapAround,wrapRGB:c.wrapRGB,morphNormals:c.morphNormals,specular:c.specular,shininess:c.shininess,metal:c.metal,perPixel:c.perPixel,bumpMap:c.bumpMap,bumpScale:c.bumpScale,normalMap:c.normalMap,normalScale:c.normalScale};return"own"===e.type?e.geometryType=b.geometryType:"yun"===e.type&&(e.yunid=b.yunid),e}b.type=d("type",a.type||"own"),b.renderType=a.renderType||"mesh",b.position=new f.Vector3,b.rotation=new f.Vector3,a.position&&b.position.val(a.position),a.rotation&&b.rotation.val(a.rotation);var c=b.mat={};c.side=a.side,c.opacity=a.opacity,c.transparent=a.transparent,c.blending=a.blending,c.blendSrc=a.blendSrc,c.blendEquation=a.blendEquation,c.depthTest=a.depthTest,c.depthWrite=a.depthWrite,c.polygonOffset=a.polygonOffset,c.polygonOffsetFactor=a.polygonOffsetFactor,c.polygonOffsetUnits=a.polygonOffsetUnits,c.alphaTest=a.alphaTest,c.overdraw=a.overdraw,c.visible=a.visible,c.needsUpdate=a.needsUpdate,c.color=a.color,c.map=a.map,c.lightMap=a.lightMap,c.specularMap=a.specularMap,c.envMap=a.envMap,c.combine=a.combine,c.reflectivity=a.reflectivity,c.refractionRatio=a.refractionRatio,c.fog=a.fog,c.shading=a.shading,c.wireframe=a.wireframe,c.wireframeLinewidth=a.wireframeLinewidth,c.wireframeLinecap=a.wireframeLinecap,c.wireframeLinejoin=a.wireframeLinejoin,c.vertexColors=a.vertexColors,c.skinning=a.skinning,c.morphTargets=a.morphTargets,c.ambient=a.ambient,c.emissive=a.emissive,c.wrapAround=a.wrapAround,c.wrapRGB=a.wrapRGB,c.morphNormals=a.morphNormals,c.specular=a.specular,c.shininess=a.shininess,c.metal=a.metal,c.perPixel=a.perPixel,c.bumpMap=a.bumpMap,c.bumpScale=a.bumpScale,c.normalMap=a.normalMap,c.normalScale=a.normalScale;for(m in c)void 0===c[m]&&delete c[m];"own"===b.type?b.geometryType=d("geo",a.geometryType||"cube"):"load"===b.type||"yun"===b.type&&(a.yunid||console.error("yunid 不可为空！"),b.yunid=a.yunid);var g=this.__render__.model;g&&(g.position.val(b.position),g.rotation.val(b.rotation))},c.exports=e});
